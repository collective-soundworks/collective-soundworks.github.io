<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Working with Max | soundworks</title>
    <meta name="description" content="Creative coding framework for distributed applications based on Web technologies">
    <meta name="generator" content="VitePress v2.0.0-alpha.16">
    <link rel="preload stylesheet" href="/assets/style.DklbAnHd.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.Crhjg3H6.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DKERbyZW.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CRk2WtWN.js">
    <link rel="modulepreload" href="/assets/recipes_working-with-max.md.B376Sw62.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-304c8b69><!--[--><!--]--><!--[--><span tabindex="-1" data-v-10d4d845></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-10d4d845>Skip to content</a><!--]--><!----><header class="VPNav" data-v-304c8b69 data-v-d5bf7c8e><div class="VPNavBar has-sidebar top" data-v-d5bf7c8e data-v-cc1d9f2e><div class="wrapper" data-v-cc1d9f2e><div class="container" data-v-cc1d9f2e><div class="title" data-v-cc1d9f2e><div class="VPNavBarTitle has-sidebar" data-v-cc1d9f2e data-v-d4488dd0><a class="title" href="/" data-v-d4488dd0><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo-nav.png" alt data-v-ab19afbb><!--]--><span data-v-d4488dd0>soundworks</span><!--[--><!--]--></a></div></div><div class="content" data-v-cc1d9f2e><div class="content-body" data-v-cc1d9f2e><!--[--><!--]--><div class="VPNavBarSearch search" data-v-cc1d9f2e data-v-bdd98725><!--[--><button type="button" class="VPNavBarSearchButton" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" data-v-bdd98725 data-v-69351052><span class="vpi-search" aria-hidden="true" data-v-69351052></span><span class="text" data-v-69351052>Search</span><span class="keys" aria-hidden="true" data-v-69351052><kbd class="key-cmd" data-v-69351052>⌘</kbd><kbd class="key-ctrl" data-v-69351052>Ctrl</kbd><kbd data-v-69351052>K</kbd></span></button><!----><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-cc1d9f2e data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tutorials/getting-started.html" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://soundworks.dev/soundworks" target="_blank" rel="noreferrer" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>soundworks API</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/credits.html" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Credits</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-cc1d9f2e data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-cc1d9f2e data-v-ef6192dc data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/collective-soundworks/collective-soundworks.github.io" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-cc1d9f2e data-v-600b50c9 data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d8fae6e2><span class="vpi-more-horizontal icon" data-v-d8fae6e2></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><!----><div class="group" data-v-600b50c9><div class="item appearance" data-v-600b50c9><p class="label" data-v-600b50c9>Appearance</p><div class="appearance-action" data-v-600b50c9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-600b50c9 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-600b50c9><div class="item social-links" data-v-600b50c9><div class="VPSocialLinks social-links-list" data-v-600b50c9 data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/collective-soundworks/collective-soundworks.github.io" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-cc1d9f2e data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-cc1d9f2e><div class="divider-line" data-v-cc1d9f2e></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-304c8b69 data-v-73add737><div class="container" data-v-73add737><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-73add737><span class="vpi-align-left menu-icon" data-v-73add737></span><span class="menu-text" data-v-73add737>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-73add737 data-v-e28a51a6><button data-v-e28a51a6>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-304c8b69 data-v-49f51a23><div class="curtain" data-v-49f51a23></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-49f51a23><span class="visually-hidden" id="sidebar-aria-label" data-v-49f51a23> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><!----><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/introduction.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Introduction</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Tutorials</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tutorials/getting-started.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tutorials/state-manager.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Using the State Manager</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tutorials/plugin-platform-init.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Using Plugins 1 - <i>platform-init</i></p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tutorials/todo-noise.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>The <i>Todo Noise</i> Application</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tutorials/node-clients.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Working with Node Clients</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tutorials/plugin-sync.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Using Plugins 2 - <i>sync</i></p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tutorials/step-sequencer.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Distributed Step Sequencer</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Recipes</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/recipes/working-with-max.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Working with Max</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Documentation</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link vp-external-link-icon link" href="https://soundworks.dev/soundworks" target="_blank" rel="noreferrer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>soundworks API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tools/helpers.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Helpers</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/plugins/platform-init.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Plugin Platform Init</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/plugins/sync.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Plugin Sync</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/plugins/filesystem.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Plugin Filesystem</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/plugins/scripting.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Plugin Scripting</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/plugins/checkin.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Plugin Checkin</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/plugins/position.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Plugin Position</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/plugins/logger.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Plugin Logger</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Ecosystem</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link vp-external-link-icon link" href="https://github.com/ircam-ismm/node-web-audio-api/" target="_blank" rel="noreferrer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>node-web-audio-api</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link vp-external-link-icon link" href="https://github.com/ircam-ismm/sc-components/" target="_blank" rel="noreferrer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>@ircam/sc-components</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link vp-external-link-icon link" href="https://github.com/ircam-ismm/sc-utils" target="_blank" rel="noreferrer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>@ircam/sc-utils</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link vp-external-link-icon link" href="https://github.com/ircam-ismm/sc-scheduling/" target="_blank" rel="noreferrer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>@ircam/sc-scheduling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link vp-external-link-icon link" href="https://github.com/ircam-ismm/devicemotion" target="_blank" rel="noreferrer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>@ircam/devicemotion</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link vp-external-link-icon link" href="https://ircam-ismm.github.io/dotpi/" target="_blank" rel="noreferrer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>dotpi tools</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Misc</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/misc/websockets-101.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>WebSockets 101</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-304c8b69 data-v-bd4f21ea><div class="VPDoc has-sidebar has-aside" data-v-bd4f21ea data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>On this page</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-63c57e50><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _recipes_working-with-max" data-v-d668f7cc><div><h1 id="working-with-max" tabindex="-1">Working with Max <a class="header-anchor" href="#working-with-max" aria-label="Permalink to “Working with Max”">​</a></h1><p>In this recipe we will explore how to use <em>soundworks</em> in the <em>Max (Cycling &#39;74)</em> environment and learn why we need to keep some specific workaround in mind in order to make our applications fully working and stable.</p><p>In the <a href="https://soundworks.dev/tutorials/node-clients.html" target="_blank" rel="noreferrer">Working with Node Clients</a> tutorial, we already explored the possibilities to work outside Web Browsers using Node.js, which to use <em>soundworks</em> in a large set of use (for example, using the <em>node.script</em> object exposed by the <em>Max</em> environment).</p><p>To illustrate this specific usage, we will create a simple <em>soundworks-max</em> application using the <em>soundworks</em> wizard that will be your base skeleton for your own projects!</p><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to “Prerequisites”">​</a></h3><ul><li><a href="https://nodejs.org/en/" target="_blank" rel="noreferrer">Node.js LTS</a></li><li><a href="https://cycling74.com/downloads" target="_blank" rel="noreferrer">Max 9+</a> or <a href="https://www.ableton.com/" target="_blank" rel="noreferrer">Live Suite 12+</a></li></ul><h3 id="related-documentation" tabindex="-1">Related documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to “Related documentation”">​</a></h3><ul><li><a href="https://docs.cycling74.com/reference/node.script/" target="_blank" rel="noreferrer"><code>node.script</code> object</a></li><li><a href="https://docs.cycling74.com/apiref/nodeformax/" target="_blank" rel="noreferrer">Max API for Node.js</a></li></ul><h2 id="general-structure" tabindex="-1">General structure <a class="header-anchor" href="#general-structure" aria-label="Permalink to “General structure”">​</a></h2><p>To illustrate such usage, while keeping things organized, we will structure our application as follow:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">my-super-app</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> working-with-max</span><span style="color:#88846F;">              # directory in which the soundworks application lives</span></span>
<span class="line"><span style="color:#A6E22E;">└──</span><span style="color:#E6DB74;"> my-max-patches</span><span style="color:#88846F;">                # directory in which the Max patches lives</span></span></code></pre></div><p>Keep in mind that such structure is not mandatory, but a structure that may should be close to a &quot;real-world&quot; use case.</p><h2 id="scaffolding-the-application" tabindex="-1">Scaffolding the application <a class="header-anchor" href="#scaffolding-the-application" aria-label="Permalink to “Scaffolding the application”">​</a></h2><p>First, open a terminal and go to your projects directory:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#66D9EF;">cd</span><span style="color:#E6DB74;"> path/to/your/projects/folder</span></span></code></pre></div><p>Create your top level application directory and go into it:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">mkdir</span><span style="color:#E6DB74;"> my-super-app</span></span>
<span class="line"><span style="color:#66D9EF;">cd</span><span style="color:#E6DB74;"> my-super-app</span></span></code></pre></div><p>As seen in other tutorials, we will use the <em>soundworks</em> wizard to scaffold the application.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">npx</span><span style="color:#E6DB74;"> @soundworks/create@latest</span><span style="color:#E6DB74;"> working-with-max</span></span></code></pre></div><p>When the wizard asks you for plugins and libraries, just skip steps using <code>enter</code>.</p><p>Then, we will create a client (as well as his associated <em>patch</em>) using the template specifically adapted to the <em>Max</em> environment. When the wizard asks you for the configuration of the default client:</p><ul><li>Name it <code>helloworld</code></li><li>Select the <code>node</code> target</li><li>Select the <code>max</code> template</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#56ADBC;"># Create client</span></span>
<span class="line"><span style="color:#86B42B;">✔</span><span style="color:#F8F8F2;font-weight:bold;"> Name of your new client (lowercase, no-space):</span><span style="color:#666666;"> …</span><span style="color:#F8F8F2;"> helloworld</span></span>
<span class="line"><span style="color:#86B42B;">✔</span><span style="color:#F8F8F2;font-weight:bold;"> Which runtime for your client?</span><span style="color:#666666;"> ›</span><span style="color:#F8F8F2;"> node</span></span>
<span class="line"><span style="color:#86B42B;">✔</span><span style="color:#F8F8F2;font-weight:bold;"> Which template would you like to use?</span><span style="color:#666666;"> ›</span><span style="color:#F8F8F2;"> max (`node.script`)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">- Creating client &quot;helloworld&quot; in file &quot;src/clients/helloworld.js&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">- name: </span><span style="color:#56ADBC;">helloworld</span></span>
<span class="line"><span style="color:#F8F8F2;">- runtime: </span><span style="color:#56ADBC;">node</span></span>
<span class="line"><span style="color:#F8F8F2;">- template: </span><span style="color:#56ADBC;">max</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56ADBC;">?</span><span style="color:#F8F8F2;font-weight:bold;"> Confirm?</span><span style="color:#666666;"> ›</span><span style="color:#F8F8F2;"> no </span><span style="color:#666666;">/</span><span> </span><span style="color:#56ADBC;text-decoration:underline;">yes</span></span></code></pre></div><p>After confirming, the wizard will then ask you to inform where you would like to create your associated <em>Max patch</em>. </p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F8F8F2;">Where should we create your Max patch? (leave blank to use current directory) › ../my-max-patches</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Important Note</p><p>Since the wizard runs inside the <em>soundworks</em> application you are creating (in our example, in the <code>my-super-app/working-with-max/</code> directory), the path you write here should be either an absolute path or a relative path from the <em>soundworks</em> application directory.</p></div><p>You can then exit the wizard :</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#56ADBC;">?</span><span style="color:#F8F8F2;font-weight:bold;"> What do you want to do?</span><span style="color:#666666;"> ›</span><span style="color:#666666;"> - Use arrow-keys. Return to submit.</span></span>
<span class="line"><span style="color:#F8F8F2;">    create a new soundworks client</span></span>
<span class="line"><span style="color:#F8F8F2;">    install / uninstall soundworks plugins</span></span>
<span class="line"><span style="color:#F8F8F2;">    install / uninstall related libs</span></span>
<span class="line"><span style="color:#F8F8F2;">    find documentation about plugins and related libs</span></span>
<span class="line"><span style="color:#F8F8F2;">    get config information about you application</span></span>
<span class="line"><span style="color:#F8F8F2;">    create a new environment config file</span></span>
<span class="line"><span style="color:#F8F8F2;">    eject the launcher and default views from `@soundworks/helpers</span></span>
<span class="line"><span style="color:#F8F8F2;">    check and update your dependencies</span></span>
<span class="line"><span style="color:#F8F8F2;">    upgrade config files from JSON to YAML</span></span>
<span class="line"><span style="color:#56ADBC;">❯</span><span>   </span><span style="color:#56ADBC;text-decoration:underline;">→ exit</span></span></code></pre></div><h2 id="running-the-application" tabindex="-1">Running the application <a class="header-anchor" href="#running-the-application" aria-label="Permalink to “Running the application”">​</a></h2><p>To make sure the application is correctly set up, just go into the <em>soundworks</em> project directory and run the server in development mode:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#66D9EF;">cd</span><span style="color:#E6DB74;"> working-with-max</span></span>
<span class="line"><span style="color:#A6E22E;">npm</span><span style="color:#E6DB74;"> run</span><span style="color:#E6DB74;"> dev</span></span></code></pre></div><p>Then, open the <em>patch</em> (<code>my-max-patches/node-helloworld.maxpat</code>) and click on the <code>script start</code> message box. You should see the <em>Node for Max debug tool</em> turning green with <em>process running</em> message. If you click on the <code>hello</code> message box, the object should answer <code>world</code>.</p><p><img src="/assets/hello-world_max-patch.4ChgETdG.png" alt="hello-world_max-patch.png"></p><p>Tada! You have a fully working <em>soundworks</em> app with a client running in <em>Node for Max</em>!</p><h2 id="how-it-works" tabindex="-1">How it works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to “How it works”">​</a></h2><p>Let&#39;s now have a closer look at your project&#39;s architecture and what was created by the wizard :</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">my-super-app</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> working-with-max</span><span style="color:#88846F;">              # Soundworks directory (where you do soundworks stuff)</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   ├──</span><span style="color:#E6DB74;"> src</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">       └──</span><span style="color:#E6DB74;"> clients</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">           └──</span><span style="color:#E6DB74;"> helloworld.js</span><span style="color:#88846F;">     # Your client script (the one you edit)</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   ├──</span><span style="color:#E6DB74;"> public</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   ├──</span><span style="color:#E6DB74;"> node_modules</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   └──</span><span style="color:#E6DB74;"> config</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> my-max-patches</span><span style="color:#88846F;">                # Max directory (where you do Max stuff)</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   ├──</span><span style="color:#E6DB74;"> node-helloworld.maxpat</span><span style="color:#88846F;">    # A patcher skeleton with a node.script object</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   └──</span><span style="color:#E6DB74;"> node-helloworld.js</span><span style="color:#88846F;">        # The script used in your Max patch acting as a &#39;bridge&#39;</span></span>
<span class="line"><span style="color:#88846F;">                                  # to the soundworks app (should remain unchanged)</span></span></code></pre></div><p>This architecture is meant to work around some inconsistencies on how the filesystem is handled between <em>Node.js</em> and <em>Max</em>. Indeed, if you take a closer look at the <em>node.script</em> object in the <em>Max</em> documentation, you will see that :</p><blockquote><p><em>&quot;Node and Max can sometimes disagree about how folder should be organized&quot;</em></p></blockquote><p>For that matter, the <em>script</em> instantiated by the <em>node.script</em> <em>Max</em> object should always remain in the same directory as your <em>patch</em>.</p><p>This lead to a conflict between the <em>soundworks</em> file structure, the need for the <em>Node.js</em> process to run within the <code>my-super-app/working-with-max</code> directory, and the need to organize your <em>Max</em> patches within your own workflow.</p><p>Solving these different conflicts and requirements leds us to create this &quot;bridge / proxy&quot; script (i.e. <code>/my-super-app/my-max-patches/node-helloworld.js</code>) which is responsible to configure the <em>Node.js</em> process to run in the right directory (i.e. <code>my-super-app/working-with-max</code>) and to import the &quot;real&quot; client script (i.e. <code>/my-super-app/working-with-max/src/client/helloworld.js</code>):</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#88846F;">// change process current working directory to the soundworks application root</span></span>
<span class="line"><span style="color:#F8F8F2;">process.</span><span style="color:#A6E22E;">chdir</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;../working-with-max&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">// import the &quot;real&quot; client source file</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;../working-with-max/src/clients/helloworld.js&#39;</span><span style="color:#F8F8F2;">);</span></span></code></pre></div><h2 id="important-notes" tabindex="-1">Important notes <a class="header-anchor" href="#important-notes" aria-label="Permalink to “Important notes”">​</a></h2><h3 id="moving-you-patches-around" tabindex="-1">Moving you patches around <a class="header-anchor" href="#moving-you-patches-around" aria-label="Permalink to “Moving you patches around”">​</a></h3><ol><li><p>If for some reason you would like to move the <em>patches</em> and <code>js</code> scripts elsewhere, it is essential to keep in mind that you will also have to change the relative path to the <em>soundworks</em> app inside the associated <em>proxy</em> script (<code>node-helloworld.js</code>).</p></li><li><p>The <em>patch</em> and its related proxy script should <strong>always</strong> together in the same directory.</p></li></ol><p>A good practice could also be for example to have the entire directory in your <em>File Preferences</em> path in <em>Max</em> in order to use this <em>patch</em> as an <em>abstraction</em>.</p><h3 id="specificities-of-the-soundworks-client-for-max" tabindex="-1">Specificities of the soundworks client for Max <a class="header-anchor" href="#specificities-of-the-soundworks-client-for-max" aria-label="Permalink to “Specificities of the soundworks client for Max”">​</a></h3><p>Compared to a regular <em>Node.js</em> client, the <em>Node.js</em> for <em>Max</em> as the following peculiarities:</p><ol><li>Import to use the <code>max-api</code> in node</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> Max </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;max-api&#39;</span><span style="color:#F8F8F2;">;</span></span></code></pre></div><p>Note that this will make the process to crash if run outside the <em>Max</em> <code>node.script</code> object.</p><ol start="2"><li>Hardcoded <code>ENV</code> variable to be able to switch between different environment configurations</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> ENV </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &#39;default&#39;</span><span style="color:#F8F8F2;">;</span></span></code></pre></div><p>This is due the impossibility to define environment variables from the <code>node.script</code> object</p></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/tutorials/step-sequencer.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>Distributed Step Sequencer</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link vp-external-link-icon pager-link next" href="https://soundworks.dev/soundworks" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>soundworks API</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api.md\":\"Hy3wBnac\",\"credits.md\":\"BrA1Pzee\",\"ecosystem_ecosystem.md\":\"BA_RphpA\",\"index.md\":\"C18x0pat\",\"introduction.md\":\"1VoA1VB0\",\"misc__contributing-to-this-site.md\":\"CYeTkNSK\",\"misc__deployment.md\":\"BngYWeyB\",\"misc__local-deployment.md\":\"GnHl-ltB\",\"misc__todo_electron-applications.md\":\"CC5baAKP\",\"misc_websockets-101.md\":\"C-gXDMS3\",\"plugins_checkin.md\":\"C6RM-Tm2\",\"plugins_filesystem.md\":\"FMZlAHa5\",\"plugins_license.md\":\"BACUdzM4\",\"plugins_logger.md\":\"WkoUpJQD\",\"plugins_platform-init.md\":\"CpKNubvr\",\"plugins_position.md\":\"IHw_x8tv\",\"plugins_scripting.md\":\"BmalzbyY\",\"plugins_soundworks-helpers.md\":\"Csh1b2RR\",\"plugins_sync.md\":\"BcOxYxrv\",\"recipes_working-with-max.md\":\"B376Sw62\",\"tools_helpers.md\":\"CZZB8W_o\",\"tools_license.md\":\"BbonFmD2\",\"tutorials__connected-lamp.md\":\"BNjt-enF\",\"tutorials__context.md\":\"BjuHZuxh\",\"tutorials_getting-started.md\":\"BpaQKx_Z\",\"tutorials_node-clients.md\":\"C9rZi5xs\",\"tutorials_plugin-platform-init.md\":\"CVSQ4ZSt\",\"tutorials_plugin-sync.md\":\"BD1vtBCG\",\"tutorials_state-manager.md\":\"DL2GqnxU\",\"tutorials_step-sequencer.md\":\"CBp3A5Ak\",\"tutorials_todo-noise.md\":\"C57Po1TH\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"soundworks\",\"description\":\"Creative coding framework for distributed applications based on Web technologies\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo-nav.png\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/collective-soundworks/collective-soundworks.github.io\"}],\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Guide\",\"link\":\"/tutorials/getting-started\"},{\"text\":\"soundworks API\",\"link\":\"https://soundworks.dev/soundworks\"},{\"text\":\"Credits\",\"link\":\"/credits\"}],\"sidebar\":[{\"text\":\"Introduction\",\"link\":\"/introduction\"},{\"text\":\"Tutorials\",\"items\":[{\"text\":\"Getting Started\",\"link\":\"/tutorials/getting-started\"},{\"text\":\"Using the State Manager\",\"link\":\"/tutorials/state-manager\"},{\"text\":\"Using Plugins 1 - <i>platform-init</i>\",\"link\":\"/tutorials/plugin-platform-init\"},{\"text\":\"The <i>Todo Noise</i> Application\",\"link\":\"/tutorials/todo-noise\"},{\"text\":\"Working with Node Clients\",\"link\":\"/tutorials/node-clients\"},{\"text\":\"Using Plugins 2 - <i>sync</i>\",\"link\":\"/tutorials/plugin-sync\"},{\"text\":\"Distributed Step Sequencer\",\"link\":\"/tutorials/step-sequencer\"}]},{\"text\":\"Recipes\",\"items\":[{\"text\":\"Working with Max\",\"link\":\"/recipes/working-with-max\"}]},{\"text\":\"Documentation\",\"items\":[{\"text\":\"soundworks API\",\"link\":\"https://soundworks.dev/soundworks\"},{\"text\":\"Helpers\",\"link\":\"/tools/helpers\"},{\"text\":\"Plugin Platform Init\",\"link\":\"/plugins/platform-init\"},{\"text\":\"Plugin Sync\",\"link\":\"/plugins/sync\"},{\"text\":\"Plugin Filesystem\",\"link\":\"/plugins/filesystem\"},{\"text\":\"Plugin Scripting\",\"link\":\"/plugins/scripting\"},{\"text\":\"Plugin Checkin\",\"link\":\"/plugins/checkin\"},{\"text\":\"Plugin Position\",\"link\":\"/plugins/position\"},{\"text\":\"Plugin Logger\",\"link\":\"/plugins/logger\"}]},{\"text\":\"Ecosystem\",\"items\":[{\"text\":\"node-web-audio-api\",\"link\":\"https://github.com/ircam-ismm/node-web-audio-api/\"},{\"text\":\"@ircam/sc-components\",\"link\":\"https://github.com/ircam-ismm/sc-components/\"},{\"text\":\"@ircam/sc-utils\",\"link\":\"https://github.com/ircam-ismm/sc-utils\"},{\"text\":\"@ircam/sc-scheduling\",\"link\":\"https://github.com/ircam-ismm/sc-scheduling/\"},{\"text\":\"@ircam/devicemotion\",\"link\":\"https://github.com/ircam-ismm/devicemotion\"},{\"text\":\"dotpi tools\",\"link\":\"https://ircam-ismm.github.io/dotpi/\"}]},{\"text\":\"Misc\",\"items\":[{\"text\":\"WebSockets 101\",\"link\":\"/misc/websockets-101\"}]}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>