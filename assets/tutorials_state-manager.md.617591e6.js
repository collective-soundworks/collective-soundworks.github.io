import{_ as s,c as a,o as e,a as n}from"./app.67a32621.js";const l="/assets/distributed-application.ec63aa91.png",t="/assets/distributed-state-management.d09470bb.png",o="/assets/globals-server-log.38f03e6b.png",p="/assets/globals-client-log.a184f944.png",c="/assets/states-in-html.cfd64b16.png",r="/assets/create-controller-wizard.afe39dba.png",i="/assets/install-sc-components-1.edf96a4e.png",F="/assets/install-sc-components-2.91be8d12.png",h="/assets/controller-1.8ae726c4.png",d="/assets/controller-2.a1db85de.png",y="/assets/controller-and-clients-1.db58d76e.png",g="/assets/controller-and-clients-2.51311d63.png",u="/assets/badly-defined-players.f2ea5e37.png",m="/assets/controller-player-final.ffc32479.png",x=JSON.parse('{"title":"Using the State Manager","description":"","frontmatter":{},"headers":[{"level":3,"title":"Relevant API documentation","slug":"relevant-api-documentation","link":"#relevant-api-documentation","children":[]},{"level":2,"title":"Introduction","slug":"introduction","link":"#introduction","children":[{"level":3,"title":"The \\"Why\\"","slug":"the-why","link":"#the-why","children":[]},{"level":3,"title":"The \\"How\\"","slug":"the-how","link":"#the-how","children":[]}]},{"level":2,"title":"Declaring schemas","slug":"declaring-schemas","link":"#declaring-schemas","children":[]},{"level":2,"title":"Registering schemas","slug":"registering-schemas","link":"#registering-schemas","children":[]},{"level":2,"title":"Create and attach shared states","slug":"create-and-attach-shared-states","link":"#create-and-attach-shared-states","children":[]},{"level":2,"title":"Display the states values","slug":"display-the-states-values","link":"#display-the-states-values","children":[]},{"level":2,"title":"Remote control and monitoring","slug":"remote-control-and-monitoring","link":"#remote-control-and-monitoring","children":[{"level":3,"title":"Binding the globals","slug":"binding-the-globals","link":"#binding-the-globals","children":[]},{"level":3,"title":"Observing and controlling clients","slug":"observing-and-controlling-clients","link":"#observing-and-controlling-clients","children":[]},{"level":3,"title":"Using the client id to enhance the control interface","slug":"using-the-client-id-to-enhance-the-control-interface","link":"#using-the-client-id-to-enhance-the-control-interface","children":[]}]},{"level":2,"title":"Conclusion","slug":"conclusion","link":"#conclusion","children":[]}],"relativePath":"tutorials/state-manager.md"}'),f={name:"tutorials/state-manager.md"},E=n('<h1 id="using-the-state-manager" tabindex="-1">Using the State Manager <a class="header-anchor" href="#using-the-state-manager" aria-hidden="true">#</a></h1><p>In this tutorial, we will learn more about the distributed state management system proposed by <em>soundworks</em>. After a short theoretical introduction on the concepts behind the shared states, we will see how the create shared global and local states, and how this pattern can help you to implement remote control and monitoring in your applications.</p><p>Along the way, you will see how <code>StateManager</code> component can simplify the development of application by abstracting in large parts the network communications and routing.</p><h3 id="relevant-api-documentation" tabindex="-1">Relevant API documentation <a class="header-anchor" href="#relevant-api-documentation" aria-hidden="true">#</a></h3><ul><li><a href="./.html">client.StateManager</a></li><li><a href="./.html">client.SharedState</a></li><li><a href="./.html">server.StateManager</a></li><li><a href="./.html">server.SharedState</a></li></ul><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-hidden="true">#</a></h2><p>First of all, let&#39;s start with a bit of theory to understand the concepts and general logic behind the <em>soundworks</em>&#39; shared states.</p><h3 id="the-why" tabindex="-1">The &quot;Why&quot; <a class="header-anchor" href="#the-why" aria-hidden="true">#</a></h3><p>Most of the time, we think of an application as &quot;something&quot; that runs on a computer with which a user can interact in some way. The idea of <em>distributed application</em> - which is what <em>soundworks</em> aims at supporting -- develop this idea to an application that runs at the same time on several computer and where several users can interact at the same time. Or to say it in a more formal way:</p><blockquote><p><em>\xAB A distributed system is a collection of autonomous computing elements that appears to its users as a single coherent system. \xBB</em> Maarten van Steen, and Andrew S. Tanenbaum. \u201CA Brief Introduction to Distributed Systems.\u201D Computing 98, no. 10, October 2016.</p></blockquote><p><img src="'+l+'" alt="distributed-application"></p><p>Additionally, in the context of creative applications, it can be very important to be able to have some very simple way to monitor and/or control the state of a distant client. This is true both during the development of the artwork / application, e.g. to tweak some synthesizer on distant machines from a central point (even in the studio, modifying some parameters on several machines can get very cumbersome), as well as during the performance, e.g. to control the general volume, to change the color of the screen of every clients at the same time etc.</p><p>The <code>SharedManager</code> and the <code>SharedState</code> abstraction provided by <em>soundworks</em> provide a simple way to define and synchronize some sets of parameters, that are of interest by multiple clients, while abstracting all the network communications involved.</p><h3 id="the-how" tabindex="-1">The &quot;How&quot; <a class="header-anchor" href="#the-how" aria-hidden="true">#</a></h3><p>From a more technical point of view, the <code>SharedState</code> can be seen as circular dataflow pattern (loosely inspired by the <a href="https://facebook.github.io/flux/docs/in-depth-overview" target="_blank" rel="noreferrer"><em>flux</em></a> pattern proposed by <em>Facebook</em>) adapted to the particular needs of real-time distributed applications.</p><p>Hence, in soundworks <code>SharedState</code>s, the dataflow follows a circular path that is always synchronized with the server. For example, if we follow the flow of data in the graph below, we can see that when an input (e.g. some user gesture) triggers a change in the state of a client (arrow 1, red), a data synchronization is automatically made with a server-side representation of the state through WebSockets (arrow 2), which in turn triggers a change in the rendering (be it audio or visual).</p><p>This simple pattern enables an important feature: any other node can make a change on the same server-side representation of the state (arrow 1&#39;, blue), while triggering 2 and 3 in a completely transparent way.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>In this tutorial, when we speak of a <em>node</em> of the network, we consider both the clients and the server.</p><p>The server is indeed a <em>node</em> just as any other client. However, its central role gives it particular abilities and features.</p></div><p><img src="'+t+`" alt="distributed-application"></p><h2 id="declaring-schemas" tabindex="-1">Declaring schemas <a class="header-anchor" href="#declaring-schemas" aria-hidden="true">#</a></h2><p>The <code>StateManager</code> component makes use of &quot;<em>schemas</em>&quot; that declare a set of attributes and their properties (you can think of it has the schema of a database table). As a schema is a kind of blueprint for a state, any number of <code>SharedStates</code> can be created from the same schema. The schema syntax follows the format described in <a href="https://github.com/ircam-jstools/parameters" target="_blank" rel="noreferrer">update link</a>.</p><p>First thing first, let&#39;s generate a new empty application with the <code>@soundworks/create</code> wizard (when the wizard will ask you for the name of the default client, just call it <code>player</code> (with <code>browser</code> target and <code>default</code> template) so that the rest of the tutorial will be more simple to follow):</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>If needed, refer to the <a href="/guide/getting-started.html">getting-started</a> page to learn more on how to run the wizard</p></div><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#66D9EF;">cd</span><span style="color:#F8F8F2;"> /path/to/working/directory</span></span>
<span class="line"><span style="color:#F8F8F2;">npx @soundworks/create@latest state-manager</span></span>
<span class="line"></span></code></pre></div><p>In this application we will declare two different schemas:</p><ul><li>A schema we will call <code>globals</code>, meant to create a shared state that will be unique across the whole application. This shared state will be created by the server and every clients of the application will attach to it.</li><li>A schema we will call <code>player</code>, meant to describe the state of single client of the application. All clients with the role <code>player</code> will create their own instance of the scheme.</li></ul><p>So first, let&#39;s create the file <code>src/server/schemas/globals.js</code> containing the following code:</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Note that the <code>src/server/schemas</code> directory included in the application template is empty and not mandatory (i.e. schema declarations could potentially live anywhere in your code). It is just proposed as a way to keep things organized.</p></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#88846F;">// src/server/schemas/globals.js</span></span>
<span class="line"><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">default</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// volume volume in dB [-60, 6]</span></span>
<span class="line"><span style="color:#F8F8F2;">  volume: {</span></span>
<span class="line"><span style="color:#F8F8F2;">    type: </span><span style="color:#E6DB74;">&#39;float&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    min: </span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">60</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    max: </span><span style="color:#AE81FF;">6</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    default: </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// mute [true, false]</span></span>
<span class="line"><span style="color:#F8F8F2;">  mute: {</span></span>
<span class="line"><span style="color:#F8F8F2;">    type: </span><span style="color:#E6DB74;">&#39;boolean&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    default: </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"></span></code></pre></div><p>While the code is quite self-explanatory, we can see that this schema will allow us to control the <em>volume</em> of all clients as well as <em>mute/unmute</em> them.</p><p>Second, let&#39;s create the file <code>src/server/schemas/players.js</code> containing the following code:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#88846F;">// src/server/schemas/player.js</span></span>
<span class="line"><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">default</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  frequency: {</span></span>
<span class="line"><span style="color:#F8F8F2;">    type: </span><span style="color:#E6DB74;">&#39;float&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    min: </span><span style="color:#AE81FF;">50</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    max: </span><span style="color:#AE81FF;">1000</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    default: </span><span style="color:#AE81FF;">440</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"></span></code></pre></div><p>This schema will allow us to control the <em>frequency</em> of an oscillator on each client.</p><p>From these two definitions, we can already foresee the structure of the audio graph created by each client, as well as how we will be able to control some of its paramters:</p><blockquote><p><code>[OscillatorNode] -&gt; [GainNode (mute)] -&gt; [GainNode (volume)] -&gt; [destination]</code></p></blockquote><ul><li>The <code>OscillatorNode</code> will be controlled by the states created from the <code>player</code> schema, each client being able to have different oscillator <em>frequency</em> values.</li><li>At contrary, the <code>GainNode</code>s (<em>mute</em> and <em>volume</em>) will be controlled globally for all clients by the common state created from <code>globals</code> schema.</li></ul><h2 id="registering-schemas" tabindex="-1">Registering schemas <a class="header-anchor" href="#registering-schemas" aria-hidden="true">#</a></h2><p>Once the schemas are declared, we can register them into the <code>StateManager</code>on the server side.</p><p>To register the schema, let&#39;s open the <code>src/server/index.js</code> file:</p><ul><li>First we need to import the declarations of the schema into the module:</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/server/index.js</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { loadConfig } </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;../utils/load-config.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;../utils/catch-unhandled-errors.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> globalsSchema </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;./schemas/globals.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> playerSchema </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;./schemas/player.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span></code></pre></div><ul><li>Then, we can register the schemas into the <code>stateManager</code> manager instance of the server:</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/server/index.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> server </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Server</span><span style="color:#F8F8F2;">(config);</span></span>
<span class="line"><span style="color:#88846F;">// configure the server for usage within this application template</span></span>
<span class="line"><span style="color:#F8F8F2;">server.</span><span style="color:#A6E22E;">useDefaultApplicationTemplate</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">// register the schemas</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">server.stateManager.</span><span style="color:#A6E22E;">registerSchema</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;globals&#39;</span><span style="color:#F8F8F2;">, globalsSchema);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">server.stateManager.</span><span style="color:#A6E22E;">registerSchema</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;player&#39;</span><span style="color:#F8F8F2;">, playerSchema);</span></span>
<span class="line"></span></code></pre></div><p>Note that the <code>stateManager.registerSchema</code> method takes 2 arguments:</p><ul><li>A <em>user defined</em> name, here <code>&#39;globals&#39;</code> and <code>&#39;player&#39;</code>.</li><li>A schema definition, here <code>globalsSchema</code> and <code>playerSchema</code>.</li></ul><p>This signature allows to define a simple user friendly named for creating and attaching shared state, but also allows to register the same schema under different names.</p><p>Now that our schemas are registered into the <code>server.stateManager</code>, we safely can create new instances of <code>SharedState</code>s based on these schemas.</p><h2 id="create-and-attach-shared-states" tabindex="-1">Create and attach shared states <a class="header-anchor" href="#create-and-attach-shared-states" aria-hidden="true">#</a></h2><p>Let&#39;s first create our <code>globals</code> shared state based on the schema declaration we defined in <code>src/server/schemas/globals.js</code>. As explained above, we want this shared state to be unique across the entire application so that all clients share the same values. Typically, this can be achieved by creating the state server-side (i.e. the server is thus the <em>owner</em> of the state), and let clients <code>attach</code> to the state (i.e. they have full access to the shared state values but do not own it).</p><p>While this distinction between <code>create</code> and <code>attach</code> can be a bit confusing at first this will get more clear writing the code. So, add following line into the <code>src/server/index.js</code> to create the <code>globals</code> shared state from its registered definition:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/server/index.js</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> server.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globals </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> server.stateManager.</span><span style="color:#A6E22E;">create</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;globals&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(globals.</span><span style="color:#A6E22E;">getValues</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span></code></pre></div><p>Here, we create a new <code>SharedState</code> instance from the schema we registered with the name <code>&#39;globals&#39;</code> just before. You should also see the default values of the state displayed in you Terminal window:</p><p><img src="`+o+`" alt="globals-server-log"></p><p>Let &#39;s now attach your <code>player</code> clients to the <code>globals</code> state created by the server.</p><p>To that end, open the file <code>src/clients/player/index.js</code> and add the following lines of code:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/player/index.js</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globals </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">attach</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;globals&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(globals.</span><span style="color:#A6E22E;">getValues</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span></code></pre></div><p>Open the URL <a href="http://127.0.0.0:8000" target="_blank" rel="noreferrer">http://127.0.0.0:8000</a> in your browser of choice and open JavaScript console. As for the server, you should see the current values of the state displayed in the console:</p><p><img src="`+p+`" alt="globals-client-log"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To open the <em>JavaScript</em> console in your browser, you can press <code>Cmd + Alt + J</code> in <em>Chrome</em> or alternatively <code>Cmd + Alt + I</code> in <em>Firefox</em>, then select the <code>Console</code> tab.</p></div><p>While we are on the client-side <code>player</code> code, let&#39;s create the <code>player</code> shared state for each client. To that end, add the following line of code in the <code>src/clients/player/index.js</code> file:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/player/index.js</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globals </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">attach</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;globals&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">create</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;player&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span></code></pre></div><p>You can see here side-by-side the <code>stateManager.create</code> and <code>stateManager.attach</code> methods and how they relate:</p><ul><li><code>stateManager.create</code> creates a new instance of a shared state that is owned by the node (clients or server).</li><li><code>stateManager.attach</code> attach to an existing instance of a shared state created (and owned) by another node.</li></ul><h2 id="display-the-states-values" tabindex="-1">Display the states values <a class="header-anchor" href="#display-the-states-values" aria-hidden="true">#</a></h2><p>Now that our shared states are setup, let&#39;s continue on our client-side code to display the current values of the different shared states and update the screen when their value change. To that end, we will use the <a href="https://lit.dev/" target="_blank" rel="noreferrer"><code>lit</code></a> library proposed by <em>Google</em> and the <code>$layout</code> object created for us by the soundworks wizard.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The <code>$layout</code> we just removed is a convenience object proposed by the template as a starting point for building interfaces. It is based on the <a href="https://lit.dev/" target="_blank" rel="noreferrer">lit</a> library developped by <em>Google</em> and its source code is located in <code>src/clients/player/views/layout.js</code>. By no mean <em>soundworks</em> requires the usage of this abstraction, feel free to remove it if you prefer using something else.</p></div><p>So, let&#39;s just import the <code>lit</code> library first.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>By default, the <code>lit</code> library is a dependency of the application, it can be used without installation.</p></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/player.js</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { Client } </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;@soundworks/core/client.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> launcher </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;@soundworks/helpers/launcher.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { html } </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;lit&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span></code></pre></div><p>Then let&#39;s create a simple component that displays the values of our two states. The layout waits for some object that has a <code>render</code>, which make it compatible with more advanced Web Components as formalized within <code>lit</code>). But let&#39;s keep simple here and just create a simple object with a <code>render</code> method that returns a piece of HTML:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/player.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> $layout </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createLayout</span><span style="color:#F8F8F2;">(client, $container);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> component </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">: () </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;h2&gt;Globals&lt;/h2&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;ul&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;li&gt;volume: </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;volume&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&lt;/li&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;li&gt;mute: </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;mute&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&lt;/li&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;/ul&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;h2&gt;Player&lt;/h2&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;ul&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;li&gt;frequency: </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">player.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;frequency&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&lt;/li&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;/ul&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    \`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  }</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">};</span></span>
<span class="line highlighted"><span style="color:#88846F;">// add the component to the layout</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">$layout.</span><span style="color:#A6E22E;">addComponent</span><span style="color:#F8F8F2;">(component);</span></span>
<span class="line"></span></code></pre></div><p>You can see how we add the component to the layout in the last line of the snippet above. If you are curious, the full code of the layout, which is quite simple, is in the file <code>src/client/player/views/layout.js</code>.</p><p>If you refresh you page (<code>Cmd + Shift + R</code>), you should now see the following:</p><p><img src="`+c+`" alt="states-in-html"></p><p>So far so good, we have all our states set up and some display of their values (it&#39;s only graphical and we won&#39;t go into the audio in this tutorial to keep it short and focused, but the idea would be exactly the same).</p><p>However, what we still miss is a way to change the values of the state. We could do it directly from our <code>player</code> clients, but we will go a bit deeper and create a new client dedicated to this task.</p><h2 id="remote-control-and-monitoring" tabindex="-1">Remote control and monitoring <a class="header-anchor" href="#remote-control-and-monitoring" aria-hidden="true">#</a></h2><p>In this section we will create a new client, we will call <code>controller</code>, dedicated to control and monitor the state of all clients of the application. So first, let&#39;s create a new client of our application using the soundworks wizard. To this end, go to the Terminal, shutdown the server (<code>Ctrl + C</code>) and enter the following command:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#F8F8F2;">npx soundworks --create-client</span></span>
<span class="line"></span></code></pre></div><p>This command will ask for questions to configure the client, just as when your created the application at the beginning of the tutorial. So let&#39;s call our new client <code>controller</code>, choose the <code>browser</code> target but this time choose the <code>controller</code> template. Finally the wizard will ask you if you want to use this client as the default one (meaning it will be accessible at the root of your website), choose <code>no</code> and confirm.</p><p><img src="`+r+`" alt="create-controller-wizard"></p><p>If you open, you editor will see a new directory in <code>src/clients/controller</code> were we will implement the logic for our controller. But first, let&#39;s also install a libray that will help us create the interface, so type in your Terminal:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#F8F8F2;">npx soundworks --install-libs</span></span>
<span class="line"></span></code></pre></div><p>Select the <code>@ircam/simple-components</code> using the space bar, then press <code>Enter</code>:</p><p><img src="`+i+'" alt="install-sc-components-1"></p><p>Then confirm:</p><p><img src="'+F+`" alt="install-sc-components-2"></p><p>The documentation of this library can be found <a href="https://ircam-ismm.github.io/simple-components/" target="_blank" rel="noreferrer">there</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Note that the step above a equivalent to running <code>npm install --save @ircam/simple-components</code>. In this case, the wizard is just here to help you find some curated libraries that we develop and know work well with <code>soundworks</code></p></div><p>Now that all things are set up, we can go back to implemeting our controller. So let&#39;s restart our development server:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#F8F8F2;">npm run dev</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre></div><p>And open the page <a href="http://127.0.0.1:8000/controller" target="_blank" rel="noreferrer">http://127.0.0.1:8000/controller</a> (note that the <code>/controller</code> part of the URL, we call a &quot;route&quot;, is automatically created by soundworks according to the different clients you create).</p><h3 id="binding-the-globals" tabindex="-1">Binding the <code>globals</code> <a class="header-anchor" href="#binding-the-globals" aria-hidden="true">#</a></h3><p>So let&#39;s begin with creating the controls for the <code>globals</code> shared state. Open the <code>src/clients/controller/index.js</code> file and add the following code to import some parts the library we just installed:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/controller/index.js</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> launcher </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;@soundworks/helpers/launcher.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { html } </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;lit&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;@ircam/simple-components/sc-number.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;@ircam/simple-components/sc-slider.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;@ircam/simple-components/sc-text.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;@ircam/simple-components/sc-toggle.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> createLayout </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;./views/layout.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span></code></pre></div><p>Importing these files, will register new Web Components that we can to use in our HTML templates. Here we import first the <code>html</code> function exposed by <code>lit</code> and several components from the <code>@ircam/siple-components</code> library: a text element to display parameter names, a slider to control the volume, a toggle button to control the mute parameter, and a number box to control the players&#39; frequencies.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/Web_Components</a> for more information on Web Components.</p></div><p>Then, such as for the <code>player</code>, let&#39;s attach to the globals state and create a component to display the shared state values:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/controller/index.js</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globals </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">attach</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;globals&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">/* eslint-disable-next-line no-unused-vars */</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> $layout </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createLayout</span><span style="color:#F8F8F2;">(client, $container);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globalsComponent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;h2&gt;Globals&lt;/h2&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;div style=&quot;padding-bottom: 4px;&quot;&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &lt;sc-text readonly value=&quot;volume (dB)&quot;&gt;&lt;/sc-text&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &lt;sc-slider</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            min=&quot;-60&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            max=&quot;6&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            value=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;volume&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &gt;&lt;/sc-slider&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;/div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;div style=&quot;padding-bottom: 4px;&quot;&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &lt;sc-text readonly value=&quot;mute&quot;&gt;&lt;/sc-text&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &lt;sc-toggle</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            ?active=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;mute&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &gt;&lt;/sc-toggle&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        &lt;/div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;/div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    \`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  },</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">};</span></span>
<span class="line highlighted"></span>
<span class="line highlighted"><span style="color:#F8F8F2;">$layout.</span><span style="color:#A6E22E;">addComponent</span><span style="color:#F8F8F2;">(globalsComponent);</span></span>
<span class="line"></span></code></pre></div><p>Indeed, the HTML code is a bit more verbose than what we did in the client, but the interface is also a bit more complex. If you refresh you <code>controller</code> page, it should look like ths screenshot above, correctly displaying the shared state default values:</p><p><img src="`+h+`" alt="controller-1"></p><p>However, interacting the interface (e.g. moving the slider or clicking the toggle) does not yet update the shared state values. To that end, let&#39;s add the following lines of code:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/controller/index.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> $layout </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createLayout</span><span style="color:#F8F8F2;">(client, $container);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">// update interface when the shared state values are updated</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">onUpdate</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> $layout.</span><span style="color:#A6E22E;">requestUpdate</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globalsComponent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;h2&gt;Globals&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;div style=&quot;padding-bottom: 4px;&quot;&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">          &lt;sc-text readonly value=&quot;volume (dB)&quot;&gt;&lt;/sc-text&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">          &lt;sc-slider</span></span>
<span class="line"><span style="color:#E6DB74;">            min=&quot;-60&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">            max=&quot;6&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">            value=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;volume&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            @input=</span><span style="color:#F92672;">\${</span><span style="color:#FD971F;">e</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> globals.</span><span style="color:#A6E22E;">set</span><span style="color:#F8F8F2;">({ volume: e.detail.value })</span><span style="color:#F92672;">}</span></span>
<span class="line"><span style="color:#E6DB74;">          &gt;&lt;/sc-slider&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;div style=&quot;padding-bottom: 4px;&quot;&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">          &lt;sc-text readonly value=&quot;mute&quot;&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">          &gt;&lt;/sc-text&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">          &lt;sc-toggle</span></span>
<span class="line"><span style="color:#E6DB74;">            ?active=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;mute&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            @change=</span><span style="color:#F92672;">\${</span><span style="color:#FD971F;">e</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> globals.</span><span style="color:#A6E22E;">set</span><span style="color:#F8F8F2;">({ mute: e.detail.value })</span><span style="color:#F92672;">}</span></span>
<span class="line"><span style="color:#E6DB74;">          &gt;&lt;/sc-toggle&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;/div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">    \`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"></span></code></pre></div><p>Now, if you open the open to emulate two <code>controller</code> clients side by side (i.e. <a href="http://127.0.0.1:8000/controller?emulate=2" target="_blank" rel="noreferrer">http://127.0.0.1:8000/controller?emulate=2</a>), you should see that both interfaces are kept synchronized through the <code>globals</code> shared state.</p><p><img src="`+d+`" alt="controller-2"></p><p>Finally, let&#39;s go back to our <code>player</code> clients, to just implement the update of the rendering when the shared states are updated too. So let&#39;s re-open the <code>src/clients/player/index.js</code> file and add the following lines of code:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/player/index.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> $layout </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createLayout</span><span style="color:#F8F8F2;">(client, $container);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">// update layout when the states are updated</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">onUpdate</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> $layout.</span><span style="color:#A6E22E;">requestUpdate</span><span style="color:#F8F8F2;">());</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">player.</span><span style="color:#A6E22E;">onUpdate</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> $layout.</span><span style="color:#A6E22E;">requestUpdate</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"></span></code></pre></div><p>With these two lines of code, all the clients are now automatically updated anytime a shared-state parameter is modified. To see this in action just open two browser windows side by side and open some controller(s) in one of them <a href="http://127.0.0.1:8000/controller?emulate=2" target="_blank" rel="noreferrer">http://127.0.0.1:8000/controller?emulate=2</a> and some players in the other one <a href="http://127.0.0.1:8000/?emulate=2" target="_blank" rel="noreferrer">http://127.0.0.1:8000/?emulate=2</a>.</p><p><img src="`+y+`" alt="controller-and-clients-1"></p><h3 id="observing-and-controlling-clients" tabindex="-1">Observing and controlling clients <a class="header-anchor" href="#observing-and-controlling-clients" aria-hidden="true">#</a></h3><p>The final thing we need to do, is to be able to control the frequency of each player from the <code>controller</code> clients. To that end, the controller needs to be able to track the creation (and deletion) of all <code>player</code> shared state in the application. Fortunately, the <code>StateManager</code> gives you access to such possibilities.</p><p>So, in the <code>src/clients/controller/index.js</code> file add the following snippet:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/controller/index.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globals </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">attach</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;globals&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> players </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Set</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"></span>
<span class="line highlighted"><span style="color:#88846F;">// observe all states created on the network</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">client.stateManager.</span><span style="color:#A6E22E;">observe</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">async</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;">schemaName</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;">stateId</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// we are only interested in player schemas</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> (schemaName </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;player&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">attach</span><span style="color:#F8F8F2;">(schemaName, stateId);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// store this state in our local list in relation to the node id</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    players.</span><span style="color:#A6E22E;">add</span><span style="color:#F8F8F2;">(player);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// remove the player from the list when is deleted. The \`onDetach\` method is</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// automatically called when the remote client disconnects and the state deleted</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    player.</span><span style="color:#A6E22E;">onDetach</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">      players.</span><span style="color:#A6E22E;">delete</span><span style="color:#F8F8F2;">(player);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">      </span><span style="color:#88846F;">// update the view to remove the player from the interface</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">      $layout.</span><span style="color:#A6E22E;">requestUpdate</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    });</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// update the view vhen the state is updated</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    player.</span><span style="color:#A6E22E;">onUpdate</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> $layout.</span><span style="color:#A6E22E;">requestUpdate</span><span style="color:#F8F8F2;">());</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// update the view to display the new player</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    $layout.</span><span style="color:#A6E22E;">requestUpdate</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  }</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><p>And finally, let&#39;s create a new graphic component to display the frequency control for all <code>player</code> shared states:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/clients/controller/index.js</span></span>
<span class="line"><span style="color:#F8F8F2;">$layout.</span><span style="color:#A6E22E;">addComponent</span><span style="color:#F8F8F2;">(globalsComponent);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> playersComponent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// loop through \`players\` to create an interface per player state</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      &lt;h2&gt;Players&lt;/h2&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">Array.</span><span style="color:#A6E22E;">from</span><span style="color:#F8F8F2;">(players).</span><span style="color:#A6E22E;">map</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">player</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &lt;div style=&quot;padding-bottom: 4px&quot;&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            &lt;sc-text value=&quot;frequency&quot; readonly&gt;&lt;/sc-text&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            &lt;sc-number</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">              min=&quot;50&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">              max=&quot;1000&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">              value=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">player.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;frequency&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">              @input=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#FD971F;">e</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> player.</span><span style="color:#A6E22E;">set</span><span style="color:#F8F8F2;">({ frequency: e.detail.value })</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">            &gt;&lt;/sc-number&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">          &lt;/div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">        \`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">      })</span><span style="color:#F92672;">}</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    \`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  }</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">}</span></span>
<span class="line highlighted"></span>
<span class="line highlighted"><span style="color:#F8F8F2;">$layout.</span><span style="color:#A6E22E;">addComponent</span><span style="color:#F8F8F2;">(playersComponent);</span></span>
<span class="line"></span></code></pre></div><p>Now if you open two browser windows and launch a controller <a href="http://127.0.0.1:8000/controller" target="_blank" rel="noreferrer">http://127.0.0.1:8000/controller</a> and a player <a href="http://127.0.0.1:8000/" target="_blank" rel="noreferrer">http://127.0.0.1:8000/</a>, you will see that you can control the frequency of the player from the controller.</p><p><img src="`+g+'" alt="controller-and-clients-2"></p><p>However, there is still an issue with this interface. Indeed, if we emulate several player clients (e.g. [<a href="http://127.0.0.1:8000/?emulate=6" target="_blank" rel="noreferrer">http://127.0.0.1:8000/?emulate=6</a>]), you will see that you have no way to know which control correspond to which player:</p><p><img src="'+u+`" alt="badly-defined-players"></p><p>Let&#39;s review our code a bit to takle this issue.</p><h3 id="using-the-client-id-to-enhance-the-control-interface" tabindex="-1">Using the client id to enhance the control interface <a class="header-anchor" href="#using-the-client-id-to-enhance-the-control-interface" aria-hidden="true">#</a></h3><p>To fix this problem let&#39;s just use the id that is automatically given by <em>soundworks</em> to each client when it connects to share it in the <code>player</code> state.</p><p>So first, let&#39;s add a new entry called <code>id</code> in our <code>player</code> schema to store this value:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#88846F;">// src/server/schemas/player.js</span></span>
<span class="line"><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">default</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  id: {</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    type: </span><span style="color:#E6DB74;">&#39;integer&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    default: </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">,</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  frequency: {</span></span>
<span class="line"><span style="color:#F8F8F2;">    type: </span><span style="color:#E6DB74;">&#39;float&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    min: </span><span style="color:#AE81FF;">50</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    max: </span><span style="color:#AE81FF;">1000</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    default: </span><span style="color:#AE81FF;">440</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"></span></code></pre></div><p>Second, let&#39;s review our <code>player client</code> to:</p><ol><li>pass the client id to the shared state when it is created by the client:</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-diff"><code><span class="line"><span style="color:#88846F;">// src/clients/player/index.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> globals </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">attach</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;globals&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#88846F;">// create the player state with the client id</span></span>
<span class="line diff remove"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">create</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;player&#39;</span><span style="color:#F8F8F2;">) </span></span>
<span class="line diff add"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">await</span><span style="color:#F8F8F2;"> client.stateManager.</span><span style="color:#A6E22E;">create</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;player&#39;</span><span style="color:#F8F8F2;">, { id: client.id }); </span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>and display the <code>client.id</code> in the player interface:</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#88846F;">// src/clients/player/index.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> component </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">: () </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;h1&gt;Client n\xB0 </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">player.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;id&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;h2&gt;Globals&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;ul&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;li&gt;volume: </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;volume&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&lt;/li&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;li&gt;mute: </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">globals.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;mute&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&lt;/li&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;h2&gt;Player&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;ul&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        &lt;li&gt;frequency: </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">player.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;frequency&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&lt;/li&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">    \`</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"></span></code></pre></div><p>Finally, let&#39;s just display this information in the controller interface too:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-diff"><code><span class="line"><span style="color:#88846F;">// src/clients/controller/index.js</span></span>
<span class="line"><span style="color:#66D9EF;">const</span><span style="color:#F8F8F2;"> playersComponent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// loop through \`players\` to create an interface per player state</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line"><span style="color:#E6DB74;">      &lt;h2&gt;Players&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">      </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">Array.</span><span style="color:#A6E22E;">from</span><span style="color:#F8F8F2;">(players).</span><span style="color:#A6E22E;">map</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">player</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">\`</span></span>
<span class="line"><span style="color:#E6DB74;">          &lt;div style=&quot;padding-bottom: 4px&quot;&gt;</span></span>
<span class="line diff remove"><span style="color:#E6DB74;">            &lt;sc-text value=&quot;frequency&quot; readonly&gt;&lt;/sc-text&gt; </span></span>
<span class="line diff add"><span style="color:#E6DB74;">            &lt;sc-text value=&quot;player: </span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">player.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;id&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;"> - frequency&quot; readonly&gt;&lt;/sc-text&gt; </span></span>
<span class="line"><span style="color:#E6DB74;">            &lt;sc-number</span></span>
<span class="line"><span style="color:#E6DB74;">              min=&quot;50&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">              max=&quot;1000&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">              value=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#F8F8F2;">player.</span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;frequency&#39;</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">              @input=&quot;</span><span style="color:#F92672;">\${</span><span style="color:#FD971F;">e</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">=&gt;</span><span style="color:#F8F8F2;"> player.</span><span style="color:#A6E22E;">set</span><span style="color:#F8F8F2;">({ frequency: e.detail.value })</span><span style="color:#F92672;">}</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">            &gt;&lt;/sc-number&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">          &lt;/div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">        \`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span><span style="color:#F92672;">}</span></span>
<span class="line"><span style="color:#E6DB74;">    \`</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span></code></pre></div><p>Now, if you open a controller (<a href="http://127.0.0.1:8000/controller" target="_blank" rel="noreferrer">http://127.0.0.1:8000/controller</a>) and several players ([<a href="http://127.0.0.1:8000/?emulate=4" target="_blank" rel="noreferrer">http://127.0.0.1:8000/?emulate=4</a>]) side by side, you should see a far more usefull interface:</p><p><img src="`+m+'" alt="controller-player-final"></p><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-hidden="true">#</a></h2><p>In this tutorial, we learned how to use the <em>soundworks</em> distributed state management system which we consider one of its most versatile component.</p><p>You learned how to create global state that are common to all clients of the application, how to use shared states to describe your clients and how use them to implement remote control and monitoring interfaces.</p><p>In the next tutorial, we will see another building block, the <code>Context</code> class, proposed by <em>soundworks</em> to help keeping your application organized as it gets more complex.</p>',137),b=[E];function w(v,D,B,k,A,q){return e(),a("div",null,b)}const C=s(f,[["render",w]]);export{x as __pageData,C as default};
